# 说明
该次题目应要求，只完成了端部分，前端部分因初次沟通技术栈不明确，在初步做出界面之后没有继续开发，题目中部分与前端有关的要求，也没有后续实现。在`interview-assignments/fullstack`目录下：
- `service`文件夹为后端部分。
- `web`文件夹为前端部分，未做细节调整，未实现题目要求。
 	
## 命令
- 服务端
`cd interview-assignments/fullstack/service`
	- 依赖安装：`npm install`
	- 启动项目：`npm run start`
	- 开发debug：`npm run debug`
	- 代码编译：`npm run build`
	- 接口文档生成：`npm run doc`，在`service/public/doc`目录下会生成结果，打开`service/public/doc/index.html`即可查看
	- 代码规范检查：`npm run eslint`
	- 运行测试：`npm run test`
	- 获取覆盖率测试结果：`npm run cover-test`，在`service/public/coverage`目录下会生成测试结果，打开`service/public/coverage/index.html`即可查看


- web端
`cd interview-assignments/fullstack/web`
	- 依赖安装：`npm install`
	- 启动项目：`npm run start`
	- 代码编译：`npm run build`
	- 代码编译结果分析：`npm run build-test`
	- 代码规范检查：`npm run lint`
## 相关设计说明
- mongodb长短域名映射关系表`domain`的数据结构设计
	- `_id`，不为空，数据唯一id
	- `name`，可为空，名称，界面需要
	- `url`，不为空，长域名
	- `compressed`，不为空，经过压缩和业务处理生成的短域名，**有唯一索引**
	- `type`，取值`default`或`custom`，默认`default`,为界面需求设计，表示是否要自定义前缀
	- `createdAt`，不为空，数据维护字段，表示数据插入时间
	- `updatedAt`，不为空，数据维护字段，表示数据最后一次修改时间
- 缓存设计
	- 根据分析，高频业务应为通过短域名获取长域名信息
	- redis做缓存为例，使用redis的字符串数据类型，缓存的`key`为 `CACHE_domain:短域名` (key的前缀为业务标识，有效数据为短域名)，对应的`value`为长域名信息
	- 缓存的维护，数据库数据的修改和插入，缓存不做操作；数据库数据的删除，缓存也删除；数据的查询，优先查缓存，如果缓存有需要的数据，则直接把缓存中的数据作为结果返回，缓存中如果没有，则去查数据库，从数据库拿到数据，在redis做缓存，并给一个时间范围内的随机过期时间。